<!DOCTYPE html>
<html lang="en">

    <head>
        <meta name = "viewport" content = "width = device-width, initial-scale = 1.0">
        <title>Course Reviews</title>
        <link rel = "stylesheet" href = "Reviews.css">
    </head>

    <body>
        <header>
            <h1>Course Reviews</h1>
            <nav>
                <a href = "../index.html">Home</a>
                <a href = "RatingCourse.html">Rate a Course</a>
            </nav>
        </header>

        <main id = "main list">
            <div id = "loading" style = "display:none;">Loading...</div>
            <section class = "search-bar">
                <select id="filter-mode" aria-label="Filter Mode">
                    <option value = "code">Course Code</option>
                    <option value = "title">Course Title</option>
                </select>
                <input type = "text" id = "search-input" placeholder = "Search for reviews" aria-label = "Search reviews">
                <button id="sort-button">Sort</button>
            </section>

            <section class = "reviews-list" id = "reviews-list">
                <article class = "review-item" data-course="course1">
                    <h2>ITCS333: Internet Software Development</h2>
                    <a href = "ReviewDetails.html?course=1">View Details...</a>
                </article>

                <article class = "review-item" data-course="course2">
                    <h2>ITCS113: Introduction to Programming</h2>
                    <a href = "ReviewDetails.html?course=2">View Details...</a>
                </article>

                <article class = "review-item" data-course="course3">
                    <h2>ITCS214: Data Structures</h2>
                    <a href = "ReviewDetails.html?course=3">View Details...</a>
                </article>

                <article class = "review-item" data-course="course4">
                    <h2>ITCS254: Discrete Structures I</h2>
                    <a href = "ReviewDetails.html?course=4">View Details...</a>
                </article>
            </section>

            <div class = "pagination">
                <button onclick="window.location.href='../index.html'">Back</button>
                <button onclick="window.location.href='MoreReviews.html'">Next</button>
            </div>

            <div style = "margin-top:20px;">
                <div class = "action-buttons" style = "text-align:center;">
                    <a href = "RatingCourse.html"><button>Add new review</button></a>
                    </div>
            </div>
        </main>

        <section id = "item-creation-form" class="modal" style = "display:none;">
            <h2>Create your review</h2>
            <form>
                <label for = "course-title">Course Title</label>
                <input type = "text" id="course-title" name = "course-title" placeholder = "Enter course title">
                <label for = "review-content">Review</label>
                <textarea id = "review-content" name = "review-content" placeholder = "Write your review here"></textarea>
                <button type = "submit">Submit review</button>
                <div class = "cancel-container"></div>
                <a href="#main list" class="cancel">Cancel</a>
            </form>
        </section>

        <footer>
            <p>&copy; 2025 Campus Hub</p>
        </footer>
<script>
    const searchInput = document.getElementById('search-input');
    const filterMode = document.getElementById('filter-mode');
    const reviews = document.querySelectorAll('.review-item');

    searchInput.addEventListener('input', function (){
        const searchTerm = this.value.toLowerCase();
        const mode = filterMode.value;

        reviews.forEach(review => {
            const titleText = review.querySelector('h2').textContent.toLowerCase();
            const [code, ...rest]=titleText.split(':');
            const courseTitle = rest.join(':').trim();
            const match = (mode==='code')?code.includes(searchTerm):courseTitle.includes(searchTerm);
            review.style.display=match?'block':'none';
        });
    });
    
    document.getElementById('sort-button').addEventListener('click', function () {
    const reviewsList = document.getElementById('reviews-list');
    const reviews = Array.from(reviewsList.children);
    document.getElementById('loading').style.display='block';
    
    setTimeout(()=> {
        reviews.sort((a,b)=>{
            const titleA = a.querySelector('h2').textContent.toLowerCase();
            const titleB = b.querySelector('h2').textContent.toLowerCase();
            return titleA.localeCompare(titleB); 
     });
    reviewsList.innerHTML = '';
    reviews.forEach(review => reviewsList.appendChild(review));
    document.getElementById('loading').style.display='none';
  },300);
});
document.getElementById('review-form').addEventListener('submit',function(e){
    e.preventDefault();
    const title = document.getElementById('course-title');
    const content = document.getElementById('review-content');
    if (!title.value.trim()){
        alert("Please enter a valid course title.");
        title.focus();
        return;
    }
    if (!content.value.trim()){
        alert("Please write your review.");
        content.focus();
        return;
    }
    alert("Your review has been submitted successfully!");
    this.reset();
});
</script>
    </body>
</html>